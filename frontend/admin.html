<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/x-icon" href="./icon/favicon.ico">
    <link rel="stylesheet" href="./src/admin.css">
    <link rel="stylesheet" href="./src/global.css">
    <script src="./src/env.js" defer></script>
    <script src="https://kit.fontawesome.com/981bb78518.js" crossorigin="anonymous"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/10.12.2/firebase-firestore-compat.js"></script>
    <script>
      const firebaseConfig = {
        apiKey: "AIzaSyDzHVViQRq4F9oXBSU1i_5oEmoOqpe58MA",
        authDomain: "nutneesa-b8ea5.firebaseapp.com",
        projectId: "nutneesa-b8ea5",
        storageBucket: "nutneesa-b8ea5.firebasestorage.app",
        messagingSenderId: "375506095597",
        appId: "1:375506095597:web:78278d3f10b65ff8a52be4",
        measurementId: "G-HR7RQ51WVE"
      };
      if (!firebase.apps.length) {
        firebase.initializeApp(firebaseConfig);
      }
    </script>
    <script src="./src/utils.js"></script>
    <script>
      loadHtmlFragment('global/navBar.html', '#nav-placeholder', function() {
        const script = document.createElement('script');
        script.src = './src/global.js';
        document.body.appendChild(script);
      });
      loadHtmlFragment('global/toTop.html', '#toTop-placeholder');
    </script>
    <script src="./src/admin-news.js"></script>
    <script src="./src/admin-members.js"></script>
    <script src="./src/admin-history.js"></script>
    <script src="./src/admin-events.js"></script>
    <script src="./src/admin-forms.js"></script>
    <script src="./src/admin-apply.js"></script>
    <script src="./src/admin-flow.js"></script>
    <script src="./src/admin-maps.js"></script>
    <script src="./src/admin.js" defer></script>
    <title>Admin Center｜NUTNEESA</title>
</head>
<body>
    <div id="toTop-placeholder"></div>
    <div id="nav-placeholder"></div>
    <div class="content">
        <div class="identityPanel unauthorize">
            <p>當前登入身份：未驗證</p>
        </div>
        <div class="topController">
            <select class="funcPicker" title="funcPicker">
                <option>控制中心｜Dashboard</option>
                <option>歷史紀錄｜History</option>
                <option>會員管理｜Members</option>
                <option>活動管理｜Events</option>
                <option>表單管理｜Forms</option>
                <option>金流管理｜Flow</option>
                <option>資源申請｜Apply</option>
                <option>美食地圖｜Maps</option>
                <option>偏好設定｜Settings</option>
            </select>
            <button class="logoutBtn" title="logoutBtn" style="color: red;">登出管理系統</button>
        </div>
        <div class="panel" data-dashboard>
            <ul>
                <li>
                    <h3>最新消息控制項</h3>
                    <div>
                        <div>
                            <div>
                                消息類型
                                <select class="newsType" title="消息類型">
                                    <option>重要通知</option>
                                    <option>系會資訊</option>
                                    <option>活動快訊</option>
                                    <option>會員專屬</option>
                                </select>
                            </div>
                            <div>
                                消息內容
                                <input type="text" placeholder="消息內容" id="newsContent" required>
                            </div>
                            <div>
                                <input type="checkbox" class="publishNowCheckbox" title="立即發布" checked>
                                立即發布消息
                            </div>
                            <div>
                                排程發布
                                <input type="datetime-local" class="arrangePublish" title="排程發布" disabled>
                            </div>
                            <div>
                                <button class="addNews" title="addNews">新增消息</button>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <h3>最新消息列表</h3>
                    <div>
                        <div class="table-scroll">
                            <table>
                                <thead>
                                    <tr>
                                        <th>可見</th>
                                        <th>序號</th>
                                        <th>消息類型</th>
                                        <th>消息內容</th>
                                        <th>創建日期</th>
                                        <th>發布日期</th>
                                        <th>經手人</th>
                                        <th>刪除</th>
                                    </tr>
                                </thead>
                                <tbody class="news-table-body">
                                    <tr>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-history>
            <ul>
                <li>
                    <h3>安全性告警</h3>
                    <div>
                        <div class="table-scroll">
                            <table>
                                <thead>
                                    <tr>
                                        <th>序號</th>
                                        <th>時間</th>
                                        <th>路徑</th>
                                        <th>內容</th>
                                        <th>執行人</th>
                                        <th>確認</th>
                                        <th>複核人</th>
                                    </tr>
                                </thead>
                                <tbody class="history-table-body">
                                    <tr>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-members>
            <ul>
                <!-- 移除會員控制項（新增會員）區塊，僅保留會員列表 -->
                <li>
                    <h3>會員列表</h3>
                    <div>
                        <div>
                            <input type="text" placeholder="搜尋會員">
                            <button class="advancedSearch" title="advancedSearch">進階搜尋選項</button>
                        </div>
                        <div class="table-scroll">
                            <table>
                                <thead>
                                    <tr>
                                        <th>序號</th>
                                        <th>會員編號</th>
                                        <th>身份類別</th>
                                        <th>會員名稱</th>
                                        <th>會員狀態</th>
                                        <th>學號</th>
                                        <th>性別</th>
                                        <th>Email</th>
                                        <th>電話</th>
                                        <th>系級</th>
                                        <th>註冊日期</th>
                                        <th>上次上線</th>
                                        <th>累計消費金額</th>
                                        <th>電子郵件驗證</th>
                                        <th>註銷會員資格</th>
                                    </tr>
                                </thead>
                                <tbody class="members-table-body">
                                    <tr>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                        <td>載入中</td>
                                    </tr>
                                </tbody>
                            </table>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-events>
            <ul>
                <li>
                    <h3>活動控制項</h3>
                    <div>
                        <div>
                            圖片連結
                            <input type="url" class="eventImgUrl" title="圖片連結" placeholder="圖片連結" required>
                        </div>
                        <div>
                            活動標題
                            <input type="text" class="eventTitle" title="標題" placeholder="活動標題" required>
                        </div>
                        <div>
                            活動類別
                            <select class="eventHashtag" title="活動類別">
                                <option>#賽事</option>
                                <option selected>#聯合</option>
                                <option>#實習</option>
                            </select>
                        </div>
                        <div>
                            活動狀態
                            <select class="eventStatus" title="活動狀態">
                                <option>尚未開始</option>
                                <option selected>開放報名</option>
                            </select>
                        </div>
                        <div>
                            活動內文
                            <input type="text" class="eventContent" title="內文" placeholder="活動內文" required>
                        </div>
                        <div>
                            非會員價格
                            <input type="number" min="0" step="1" class="eventNonMemberPrice" title="非會員價格" value="0">
                        </div>
                        <div>
                            會員價格
                            <input type="number" min="0" step="1" class="eventMemberPrice" title="會員價格" value="0">
                        </div>
                        <div>
                            報名開始
                            <input type="datetime-local" class="startEnrollDate" title="報名開始" required>
                        </div>
                        <div>
                            報名截止
                            <input type="datetime-local" class="endEnrollDate" title="報名截止" required>
                        </div>
                        <div>
                            活動日期
                            <input type="datetime-local" class="eventDate" title="活動日期" required>
                        </div>
                        <div>
                            活動地點
                            <input type="text" class="location" placeholder="活動地點" required>
                        </div>
                        <div>
                            系別限制
                            <input type="text" class="restrictDepartment" title="系別限制" placeholder="系別限制（以空格分隔）">
                        </div>
                        <div>
                            年級限制
                            <input type="text" class="restrictYear" title="年級限制" placeholder="年級限制（中文，以空格分隔）">
                        </div>
                        <div>
                            <input type="checkbox" class="restrictMember" title="會員限制">
                            會員限制
                        </div>
                        <div>
                            人數限制（0表示無上限）
                            <input type="number" min="0" step="1" class="restrictQuantity" title="人數限制" value="0">
                        </div>
                        <div>
                            <button class="addEvent">新增活動</button>
                        </div>
                    </div>
                    <!-- 活動預覽區塊 -->
                    <div style="display:flex;justify-content: center;">
                        <div class="event-preview"></div>
                    </div>
                    <div>
                        <div>
                            <p>活動列表</p>
                            <div class="table-scroll">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>可視</th>
                                            <th>圖片連結</th>
                                            <th>活動標題</th>
                                            <th>活動類別</th>
                                            <th>活動狀態</th>
                                            <th>活動內文</th>
                                            <th>非會員價格</th>
                                            <th>會員價格</th>
                                            <th>發布者</th>
                                            <th>創建日期</th>
                                            <th>活動日期</th>
                                            <th>報名開始</th>
                                            <th>報名截止</th>
                                            <th>活動地點</th>
                                            <th>報名人數</th>
                                            <th>系別限制</th>
                                            <th>年級限制</th>
                                            <th>會員限制</th>
                                            <th>人數限制</th>
                                            <th>刪除</th>
                                        </tr>
                                    </thead>
                                    <tbody class="events-table-body">
                                        <tr>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-forms>
            <ul>
                <li>
                    <h3>表單控制</h3>
                    <button id="createFormBtn" type="button">建立新表單</button>
                </li>
                <li>
                    <h3>表單列表</h3>
                    <div class="table-scroll">
                        <table>
                            <thead>
                                <tr>
                                    <th>序號</th>
                                    <th>標題</th>
                                    <th>關聯活動</th>
                                    <th>填寫人數</th>
                                    <th>建立時間</th>
                                    <th>操作</th>
                                </tr>
                            </thead>
                            <tbody class="forms-table-body">
                                <tr>
                                    <td>載入中</td>
                                    <td>載入中</td>
                                    <td>載入中</td>
                                    <td>載入中</td>
                                    <td>載入中</td>
                                    <td>載入中</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-flow>
            <ul>
                <li>
                    <h3>帳目控制</h3>
                    <div>
                        <div>
                            <p>手動新增</p>
                            <select class="incomeAndOutcome" title="incomeAndOutcome">
                                <option>收入｜Income</option>
                                <option>支出｜Outcome</option>
                                <option>轉帳｜Transfer</option>
                            </select>
                            <select class="incomeType" title="incomeType">
                                <option>系學會費收入</option>
                                <option>廠商贊助</option>
                            </select>
                            <select class="outcomeType" title="outcomeType" hidden>
                                <option>一般常備用品</option>
                                <option>交通支出</option>
                                <option>設備維護</option>
                            </select>
                            <div class="transferType" title="transferType" hidden>
                                From
                                <select class="transferFrom" title="transferFrom">
                                    <option>郵局</option>
                                    <option>社辦保險箱</option>
                                </select>
                                To
                                <select class="transferTo" title="transferTo">
                                    <option>郵局</option>
                                    <option>社辦保險箱</option>
                                </select>
                            </div>
                            <input type="number" title="flowValue" placeholder="金額不需附帶+/-" min="0" step="1">
                            <input type="text" placeholder="備註">
                            <input type="submit" value="送出">
                        </div>
                        <div>
                            <p>由CSV匯入</p>
                            <input type="file" title="uploadCSV" disabled>
                        </div>
                    </div>
                </li>
                <li>
                    <h3>金流列表</h3>
                    <div>
                        <div>
                            <input type="text" placeholder="搜尋金流">
                            <button class="advancedSearch" title="advancedSearch">進階搜尋選項</button>
                        </div>
                        <div class="table-scroll">
                            <table>
                                <thead>
                                    <tr>
                                        <th>序號</th>
                                        <th>收支</th>
                                        <th>類別</th>
                                        <th>名稱</th>
                                        <th>金額</th>
                                        <th>時間</th>
                                        <th>經手人</th>
                                    </tr>
                                </thead>
                            </table>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-apply>
            <ul>
                <li>
                    <h3>資源申請審核</h3>
                    <div>
                        <div>
                            <p>審核列表</p>
                        </div>
                    </div>
                </li>
                <li>
                    <h3>活動報名審核</h3>
                    <div>
                        <div>
                            <div class="table-scroll">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>序號</th>
                                            <th>姓名</th>
                                            <th>系級</th>
                                            <th>報名內容</th>
                                            <th>需付款金額</th>
                                            <th>付款方式</th>
                                            <th>作答內容</th>
                                            <th>付款狀態</th>
                                        </tr>
                                    </thead>
                                    <tbody class="event-registration-table-body">
                                        <tr>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-maps>
            <ul>
                <li>
                    <h3>美食地圖控制項</h3>
                    <div>
                        <div>
                            <p>新增地標</p>
                            <div>
                                餐廳類別
                                <select class="restaurantType" title="餐廳類別"> 
                                    <option>A級美食嘉年華</option>
                                    <option>B級美食嘉年華</option>
                                    <option>咖啡廳及甜點店</option>
                                </select>
                            </div>
                            <div>
                                餐廳描述
                                <input type="text" class="restaurantDescription" placeholder="餐廳描述" required>
                            </div>
                            <div>
                                Place ID
                                <input type="text" class="restaurantPlaceId" placeholder="Google Place ID" required disabled>
                            </div>
                            <div>
                                封面照片
                                <input type="url" class="restaurantImage" placeholder="封面照片" required>
                            </div>
                            <div>
                                菜單連結
                                <input type="text" class="restaurantMenuUrl" placeholder="菜單連結（可輸入多個，以空白鍵分隔）">
                            </div>
                            <div>
                                <button class="addRestaurant">新增餐廳</button>
                            </div>
                        </div>
                        <hr>
                        <div style="margin-top:24px;">
                            <h4>Google Place ID 查詢工具</h4>
                            <input id="pac-input" class="controls" type="text" placeholder="搜尋地點..." style="margin-bottom:8px;width:300px;">
                            <div id="map" style="height:300px;width:100%;"></div>
                            <div style="margin-top:12px;">
                                <p><strong>選定位置資訊：</strong></p>
                                <p><strong>名稱：</strong><span id="place-name">尚未選擇</span></p>
                                <p><strong>Place ID：</strong><span id="place-id">尚未選擇</span></p>
                                <p><strong>地址：</strong><span id="place-address">尚未選擇</span></p>
                            </div>
                        </div>
                    </div>
                </li>
                <li>
                    <h3>美食地圖列表</h3>
                    <div>
                        <input type="text" title="searchBox" placeholder="搜尋 店名/地址/描述/電話">
                        <select class="searchRestaurantType" title="餐廳類別"> 
                            <option>A級美食嘉年華</option>
                            <option>B級美食嘉年華</option>
                            <option>咖啡廳及甜點店</option>
                        </select>
                    </div>
                    <div>
                        <div>
                            <div class="table-scroll">
                                <table>
                                    <thead>
                                        <tr>
                                            <th>序號</th>
                                            <th>名稱</th>
                                            <th>類別</th>
                                            <th>地址</th>
                                            <th>描述</th>
                                            <th>電話</th>
                                            <th>營業時間</th>
                                            <th>經度</th>
                                            <th>緯度</th>
                                            <th>網址</th>
                                            <th>圖片</th>
                                            <th>菜單連結</th>
                                            <th>刪除</th>
                                        </tr>
                                    </thead>
                                    <tbody class="mapitems-table-body">
                                        <tr>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                            <td>載入中</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
        <div class="panel" data-settings>
            <ul>
                <li>
                    <h3>安全性控制項</h3>
                    <div>
                        <div>
                            <p>新增SSO憑證（單一無密碼登入驗證）</p>
                            <input type="button" value="新增PassKey">
                        </div>
                    </div>
                </li>
                <li>
                    <h3>系統</h3>
                    <div>
                        <div>
                            <p>版本控制</p>
                            <p>88bf91a1a3139a636fe0f049215bb3fc7f91a1cb</p>
                        </div>
                        <div>
                            <p>上次更新</p>
                            <p>202507050535</p>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</body>
<!-- Google Maps JS API (Place Autocomplete) -->
<script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDeOzMvp4EWuR7G1_niSjLOZRnOJrN59zY&libraries=places&callback=initMap" async defer></script>
</html>